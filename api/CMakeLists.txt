cmake_minimum_required(VERSION 3.4)

project(api)

include(indigo-version.cmake)

if (BUILD_INDIGO)
    if (PREPARE_INDIGO_BINDINGS)
        add_custom_target(before-bindings)
        set(INDIGO_CURRENT_NATIVE_LIBS_DIRECTORY ${INDIGO_NATIVE_LIBS_DIRECTORY}/${CMAKE_SYSTEM_NAME_LOWER}-${CMAKE_SYSTEM_PROCESSOR})
    endif ()

    add_subdirectory(cpp/indigo)
    if (BUILD_INDIGO_INCHI)
        add_subdirectory(cpp/indigo-inchi)
    endif ()
    if (BUILD_INDIGO_RENDERER)
        add_subdirectory(cpp/indigo-renderer)
    endif ()
    if (BUILD_BINGO_NOSQL)
        add_subdirectory(cpp/bingo-nosql)
    endif ()
    if (ENABLE_TESTS)
        add_subdirectory(cpp/tests)
    endif ()

    if (BUILD_INDIGO_BINDINGS)
        add_custom_target(bindings)
    endif()
    if (BUILD_INDIGO_BINDINGS_PYTHON)
        add_subdirectory(python)
    endif()
    if (BUILD_INDIGO_BINDINGS_JAVA)
        add_subdirectory(java)
    endif()
    if (BUILD_INDIGO_BINDINGS_DOTNET)
        add_subdirectory(dotnet)
    endif()
    if (BUILD_INDIGO_BINDINGS_R)
        add_subdirectory(r)
    endif()
    if (EMSCRIPTEN)
        add_subdirectory(wasm)
    endif()
endif ()
